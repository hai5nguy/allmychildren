'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Col = exports.Row = undefined;

var _keys = require('babel-runtime/core-js/object/keys');

var _keys2 = _interopRequireDefault(_keys);

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Grid = function (_Component) {
  (0, _inherits3.default)(Grid, _Component);

  function Grid() {
    (0, _classCallCheck3.default)(this, Grid);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(Grid).apply(this, arguments));
  }

  (0, _createClass3.default)(Grid, [{
    key: 'render',
    value: function render() {
      var _props = this.props;
      var className = _props.className;
      var frame = _props.frame;
      var children = _props.children;
      var props = (0, _objectWithoutProperties3.default)(_props, ['className', 'frame', 'children']);

      var gridClassNames = (0, _classnames2.default)(className, 'slds-grid', 'slds-grid--vertical', frame ? 'slds-grid--frame' : null);
      return _react2.default.createElement(
        'div',
        (0, _extends3.default)({ className: gridClassNames }, props),
        children
      );
    }
  }]);
  return Grid;
}(_react.Component);

Grid.propTypes = {
  className: _react.PropTypes.string,
  frame: _react.PropTypes.bool,
  children: _react.PropTypes.node
};

var Row = exports.Row = function (_Component2) {
  (0, _inherits3.default)(Row, _Component2);

  function Row() {
    (0, _classCallCheck3.default)(this, Row);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(Row).apply(this, arguments));
  }

  (0, _createClass3.default)(Row, [{
    key: 'renderColumn',
    value: function renderColumn(colProps, child) {
      /* eslint-disable no-use-before-define */
      if (child.type !== Col) {
        return _react2.default.createElement(
          Col,
          colProps,
          child
        );
      }

      var childProps = (0, _keys2.default)(colProps).reduce(function (cprops, key) {
        cprops[key] = child.props[key] || colProps[key];
        return cprops;
      }, {});
      return _react2.default.cloneElement(child, childProps);
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props;
      var className = _props2.className;
      var align = _props2.align;
      var nowrap = _props2.nowrap;
      var nowrapSmall = _props2.nowrapSmall;
      var nowrapMedium = _props2.nowrapMedium;
      var nowrapLarge = _props2.nowrapLarge;
      var cols = _props2.cols;
      var colsSmall = _props2.colsSmall;
      var colsMedium = _props2.colsMedium;
      var colsLarge = _props2.colsLarge;
      var children = _props2.children;
      var props = (0, _objectWithoutProperties3.default)(_props2, ['className', 'align', 'nowrap', 'nowrapSmall', 'nowrapMedium', 'nowrapLarge', 'cols', 'colsSmall', 'colsMedium', 'colsLarge', 'children']);

      var rowClassNames = (0, _classnames2.default)(className, 'slds-grid', align ? 'slds-grid--align-' + align : null, nowrap ? 'slds-nowrap' : 'slds-wrap', nowrapSmall ? 'slds-nowrap--small' : null, nowrapMedium ? 'slds-nowrap--medium' : null, nowrapLarge ? 'slds-nowrap--large' : null);
      var totalCols = cols || function () {
        var cnt = 0;
        _react2.default.Children.forEach(children, function (child) {
          return cnt += child.props.cols || 1;
        });
        return cnt;
      }();
      var colProps = {
        totalCols: totalCols,
        totalColsSmall: colsSmall || totalCols,
        totalColsMedium: colsMedium || totalCols,
        totalColsLarge: colsLarge || totalCols
      };
      return _react2.default.createElement(
        'div',
        (0, _extends3.default)({ className: rowClassNames }, props),
        _react2.default.Children.map(children, this.renderColumn.bind(this, colProps))
      );
    }
  }]);
  return Row;
}(_react.Component);

var ROW_ALIGNS = ['center', 'space', 'spread'];

Row.propTypes = {
  className: _react.PropTypes.string,
  align: _react.PropTypes.oneOf(ROW_ALIGNS),
  nowrap: _react.PropTypes.bool,
  nowrapSmall: _react.PropTypes.bool,
  nowrapMedium: _react.PropTypes.bool,
  nowrapLarge: _react.PropTypes.bool,
  cols: _react.PropTypes.number,
  colsSmall: _react.PropTypes.number,
  colsMedium: _react.PropTypes.number,
  colsLarge: _react.PropTypes.number,
  children: _react.PropTypes.node
};

function adjustCols(colNum, large) {
  if (colNum > 6) {
    return large ? 12 : 6;
  }
  return colNum;
}

var Col = exports.Col = function (_Component3) {
  (0, _inherits3.default)(Col, _Component3);

  function Col() {
    (0, _classCallCheck3.default)(this, Col);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(Col).apply(this, arguments));
  }

  (0, _createClass3.default)(Col, [{
    key: 'render',
    value: function render() {
      var _props3 = this.props;
      var className = _props3.className;
      var padded = _props3.padded;
      var align = _props3.align;
      var noFlex = _props3.noFlex;
      var order = _props3.order;
      var orderSmall = _props3.orderSmall;
      var orderMedium = _props3.orderMedium;
      var orderLarge = _props3.orderLarge;
      var cols = _props3.cols;
      var colsSmall = _props3.colsSmall;
      var colsMedium = _props3.colsMedium;
      var colsLarge = _props3.colsLarge;
      var totalCols = _props3.totalCols;
      var totalColsSmall = _props3.totalColsSmall;
      var totalColsMedium = _props3.totalColsMedium;
      var totalColsLarge = _props3.totalColsLarge;
      var children = _props3.children;
      var props = (0, _objectWithoutProperties3.default)(_props3, ['className', 'padded', 'align', 'noFlex', 'order', 'orderSmall', 'orderMedium', 'orderLarge', 'cols', 'colsSmall', 'colsMedium', 'colsLarge', 'totalCols', 'totalColsSmall', 'totalColsMedium', 'totalColsLarge', 'children']);

      var rowClassNames = (0, _classnames2.default)(className, padded ? 'slds-col--padded' + (/^(medium|large)$/.test(padded) ? '-' + padded : '') : 'slds-col', align ? 'slds-align-' + align : null, noFlex ? 'slds-no-flex' : null, order ? 'slds-order--' + order : null, orderSmall ? 'slds-small-order--' + orderSmall : null, orderMedium ? 'slds-medium-order--' + orderMedium : null, orderLarge ? 'slds-large-order--' + orderLarge : null, cols && totalCols ? 'slds-size--' + cols + '-of-' + adjustCols(totalCols, true) : null, colsSmall && totalColsSmall ? 'slds-small-size--' + colsSmall + '-of-' + adjustCols(totalColsSmall) : null, colsMedium && totalColsMedium ? 'slds-medium-size--' + colsMedium + '-of-' + adjustCols(totalColsMedium) : null, colsLarge && totalColsMedium ? 'slds-large-size--' + colsLarge + '-of-' + adjustCols(totalColsLarge, true) : null);
      return _react2.default.createElement(
        'div',
        (0, _extends3.default)({ className: rowClassNames }, props),
        children
      );
    }
  }]);
  return Col;
}(_react.Component);

var COL_ALIGNS = ['top', 'medium', 'bottom'];

Col.propTypes = {
  className: _react.PropTypes.string,
  padded: _react.PropTypes.oneOfType([_react.PropTypes.bool, _react.PropTypes.string]),
  align: _react.PropTypes.oneOf(COL_ALIGNS),
  noFlex: _react.PropTypes.bool,
  order: _react.PropTypes.number,
  orderSmall: _react.PropTypes.number,
  orderMedium: _react.PropTypes.number,
  orderLarge: _react.PropTypes.number,
  nowrap: _react.PropTypes.bool,
  cols: _react.PropTypes.number,
  colsSmall: _react.PropTypes.number,
  colsMedium: _react.PropTypes.number,
  colsLarge: _react.PropTypes.number,
  totalCols: _react.PropTypes.number,
  totalColsSmall: _react.PropTypes.number,
  totalColsMedium: _react.PropTypes.number,
  totalColsLarge: _react.PropTypes.number,
  children: _react.PropTypes.node
};

exports.default = Grid;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JpcHRzL0dyaWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQUdNOzs7Ozs7Ozs7OzZCQUNLO21CQUMwQyxLQUFLLEtBQUwsQ0FEMUM7VUFDQyw2QkFERDtVQUNZLHFCQURaO1VBQ21CLDJCQURuQjtVQUNnQywyRkFEaEM7O0FBRVAsVUFBTSxpQkFBaUIsMEJBQ3JCLFNBRHFCLEVBQ1YsV0FEVSxFQUNHLHFCQURILEVBRXJCLFFBQVEsa0JBQVIsR0FBNkIsSUFBN0IsQ0FGSSxDQUZDO0FBTVAsYUFDRTs7aUNBQUssV0FBWSxjQUFaLElBQWtDLE1BQXZDO1FBQ0ksUUFESjtPQURGLENBTk87OztTQURMOzs7QUFlTixLQUFLLFNBQUwsR0FBaUI7QUFDZixhQUFXLGlCQUFVLE1BQVY7QUFDWCxTQUFPLGlCQUFVLElBQVY7QUFDUCxZQUFVLGlCQUFVLElBQVY7Q0FIWjs7SUFNYTs7Ozs7Ozs7OztpQ0FDRSxVQUFVLE9BQU87O0FBRTVCLFVBQUksTUFBTSxJQUFOLEtBQWUsR0FBZixFQUFvQjtBQUN0QixlQUFPO0FBQUMsYUFBRDtVQUFVLFFBQVY7VUFBdUIsS0FBdkI7U0FBUCxDQURzQjtPQUF4Qjs7QUFJQSxVQUFNLGFBQWEsb0JBQVksUUFBWixFQUFzQixNQUF0QixDQUE2QixVQUFDLE1BQUQsRUFBUyxHQUFULEVBQWlCO0FBQy9ELGVBQU8sR0FBUCxJQUFjLE1BQU0sS0FBTixDQUFZLEdBQVosS0FBb0IsU0FBUyxHQUFULENBQXBCLENBRGlEO0FBRS9ELGVBQU8sTUFBUCxDQUYrRDtPQUFqQixFQUc3QyxFQUhnQixDQUFiLENBTnNCO0FBVTVCLGFBQU8sZ0JBQU0sWUFBTixDQUFtQixLQUFuQixFQUEwQixVQUExQixDQUFQLENBVjRCOzs7OzZCQWFyQjtvQkFLSCxLQUFLLEtBQUwsQ0FMRztVQUVMLDhCQUZLO1VBRU0sc0JBRk47VUFFYSx3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IFJlYWN0LCB7IENvbXBvbmVudCwgUHJvcFR5cGVzIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGNsYXNzbmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5cbmNsYXNzIEdyaWQgZXh0ZW5kcyBDb21wb25lbnQge1xuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGZyYW1lLCBjaGlsZHJlbiwgLi4ucHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgZ3JpZENsYXNzTmFtZXMgPSBjbGFzc25hbWVzKFxuICAgICAgY2xhc3NOYW1lLCAnc2xkcy1ncmlkJywgJ3NsZHMtZ3JpZC0tdmVydGljYWwnLFxuICAgICAgZnJhbWUgPyAnc2xkcy1ncmlkLS1mcmFtZScgOiBudWxsXG4gICAgKTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9eyBncmlkQ2xhc3NOYW1lcyB9IHsgLi4ucHJvcHMgfT5cbiAgICAgICAgeyBjaGlsZHJlbiB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbkdyaWQucHJvcFR5cGVzID0ge1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGZyYW1lOiBQcm9wVHlwZXMuYm9vbCxcbiAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLFxufTtcblxuZXhwb3J0IGNsYXNzIFJvdyBleHRlbmRzIENvbXBvbmVudCB7XG4gIHJlbmRlckNvbHVtbihjb2xQcm9wcywgY2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11c2UtYmVmb3JlLWRlZmluZSAqL1xuICAgIGlmIChjaGlsZC50eXBlICE9PSBDb2wpIHtcbiAgICAgIHJldHVybiA8Q29sIHsgLi4uY29sUHJvcHMgfT57IGNoaWxkIH08L0NvbD47XG4gICAgfVxuXG4gICAgY29uc3QgY2hpbGRQcm9wcyA9IE9iamVjdC5rZXlzKGNvbFByb3BzKS5yZWR1Y2UoKGNwcm9wcywga2V5KSA9PiB7XG4gICAgICBjcHJvcHNba2V5XSA9IGNoaWxkLnByb3BzW2tleV0gfHwgY29sUHJvcHNba2V5XTtcbiAgICAgIHJldHVybiBjcHJvcHM7XG4gICAgfSwge30pO1xuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGQsIGNoaWxkUHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGNsYXNzTmFtZSwgYWxpZ24sIG5vd3JhcCwgbm93cmFwU21hbGwsIG5vd3JhcE1lZGl1bSwgbm93cmFwTGFyZ2UsXG4gICAgICBjb2xzLCBjb2xzU21hbGwsIGNvbHNNZWRpdW0sIGNvbHNMYXJnZSxcbiAgICAgIGNoaWxkcmVuLCAuLi5wcm9wcyxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCByb3dDbGFzc05hbWVzID0gY2xhc3NuYW1lcyhcbiAgICAgIGNsYXNzTmFtZSwgJ3NsZHMtZ3JpZCcsXG4gICAgICBhbGlnbiA/IGBzbGRzLWdyaWQtLWFsaWduLSR7YWxpZ259YCA6IG51bGwsXG4gICAgICBub3dyYXAgPyBgc2xkcy1ub3dyYXBgIDogJ3NsZHMtd3JhcCcsXG4gICAgICBub3dyYXBTbWFsbCA/ICdzbGRzLW5vd3JhcC0tc21hbGwnIDogbnVsbCxcbiAgICAgIG5vd3JhcE1lZGl1bSA/ICdzbGRzLW5vd3JhcC0tbWVkaXVtJyA6IG51bGwsXG4gICAgICBub3dyYXBMYXJnZSA/ICdzbGRzLW5vd3JhcC0tbGFyZ2UnIDogbnVsbFxuICAgICk7XG4gICAgY29uc3QgdG90YWxDb2xzID0gY29scyB8fCAoKCkgPT4ge1xuICAgICAgbGV0IGNudCA9IDA7XG4gICAgICBSZWFjdC5DaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuLCAoY2hpbGQpID0+IGNudCArPSBjaGlsZC5wcm9wcy5jb2xzIHx8IDEpO1xuICAgICAgcmV0dXJuIGNudDtcbiAgICB9KSgpO1xuICAgIGNvbnN0IGNvbFByb3BzID0ge1xuICAgICAgdG90YWxDb2xzLFxuICAgICAgdG90YWxDb2xzU21hbGw6IGNvbHNTbWFsbCB8fCB0b3RhbENvbHMsXG4gICAgICB0b3RhbENvbHNNZWRpdW06IGNvbHNNZWRpdW0gfHwgdG90YWxDb2xzLFxuICAgICAgdG90YWxDb2xzTGFyZ2U6IGNvbHNMYXJnZSB8fCB0b3RhbENvbHMsXG4gICAgfTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9eyByb3dDbGFzc05hbWVzIH0geyAuLi5wcm9wcyB9PlxuICAgICAgICB7IFJlYWN0LkNoaWxkcmVuLm1hcChjaGlsZHJlbiwgdGhpcy5yZW5kZXJDb2x1bW4uYmluZCh0aGlzLCBjb2xQcm9wcykpIH1cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbn1cblxuY29uc3QgUk9XX0FMSUdOUyA9IFtcbiAgJ2NlbnRlcicsXG4gICdzcGFjZScsXG4gICdzcHJlYWQnLFxuXTtcblxuUm93LnByb3BUeXBlcyA9IHtcbiAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBhbGlnbjogUHJvcFR5cGVzLm9uZU9mKFJPV19BTElHTlMpLFxuICBub3dyYXA6IFByb3BUeXBlcy5ib29sLFxuICBub3dyYXBTbWFsbDogUHJvcFR5cGVzLmJvb2wsXG4gIG5vd3JhcE1lZGl1bTogUHJvcFR5cGVzLmJvb2wsXG4gIG5vd3JhcExhcmdlOiBQcm9wVHlwZXMuYm9vbCxcbiAgY29sczogUHJvcFR5cGVzLm51bWJlcixcbiAgY29sc1NtYWxsOiBQcm9wVHlwZXMubnVtYmVyLFxuICBjb2xzTWVkaXVtOiBQcm9wVHlwZXMubnVtYmVyLFxuICBjb2xzTGFyZ2U6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cblxuZnVuY3Rpb24gYWRqdXN0Q29scyhjb2xOdW0sIGxhcmdlKSB7XG4gIGlmIChjb2xOdW0gPiA2KSB7XG4gICAgcmV0dXJuIGxhcmdlID8gMTIgOiA2O1xuICB9XG4gIHJldHVybiBjb2xOdW07XG59XG5cbmV4cG9ydCBjbGFzcyBDb2wgZXh0ZW5kcyBDb21wb25lbnQge1xuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgY2xhc3NOYW1lLCBwYWRkZWQsIGFsaWduLCBub0ZsZXgsXG4gICAgICBvcmRlciwgb3JkZXJTbWFsbCwgb3JkZXJNZWRpdW0sIG9yZGVyTGFyZ2UsXG4gICAgICBjb2xzLCBjb2xzU21hbGwsIGNvbHNNZWRpdW0sIGNvbHNMYXJnZSxcbiAgICAgIHRvdGFsQ29scywgdG90YWxDb2xzU21hbGwsIHRvdGFsQ29sc01lZGl1bSwgdG90YWxDb2xzTGFyZ2UsXG4gICAgICBjaGlsZHJlbiwgLi4ucHJvcHMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3Qgcm93Q2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMoXG4gICAgICBjbGFzc05hbWUsXG4gICAgICBwYWRkZWQgP1xuICAgICAgICBgc2xkcy1jb2wtLXBhZGRlZCR7L14obWVkaXVtfGxhcmdlKSQvLnRlc3QocGFkZGVkKSA/ICctJyArIHBhZGRlZCA6ICcnfWAgOlxuICAgICAgICAnc2xkcy1jb2wnLFxuICAgICAgYWxpZ24gPyBgc2xkcy1hbGlnbi0ke2FsaWdufWAgOiBudWxsLFxuICAgICAgbm9GbGV4ID8gJ3NsZHMtbm8tZmxleCcgOiBudWxsLFxuICAgICAgb3JkZXIgPyBgc2xkcy1vcmRlci0tJHtvcmRlcn1gIDogbnVsbCxcbiAgICAgIG9yZGVyU21hbGwgPyBgc2xkcy1zbWFsbC1vcmRlci0tJHtvcmRlclNtYWxsfWAgOiBudWxsLFxuICAgICAgb3JkZXJNZWRpdW0gPyBgc2xkcy1tZWRpdW0tb3JkZXItLSR7b3JkZXJNZWRpdW19YCA6IG51bGwsXG4gICAgICBvcmRlckxhcmdlID8gYHNsZHMtbGFyZ2Utb3JkZXItLSR7b3JkZXJMYXJnZX1gIDogbnVsbCxcbiAgICAgIGNvbHMgJiYgdG90YWxDb2xzID8gYHNsZHMtc2l6ZS0tJHtjb2xzfS1vZi0ke2FkanVzdENvbHModG90YWxDb2xzLCB0cnVlKX1gIDogbnVsbCxcbiAgICAgIGNvbHNTbWFsbCAmJiB0b3RhbENvbHNTbWFsbCA/IGBzbGRzLXNtYWxsLXNpemUtLSR7Y29sc1NtYWxsfS1vZi0ke2FkanVzdENvbHModG90YWxDb2xzU21hbGwpfWAgOiBudWxsLFxuICAgICAgY29sc01lZGl1bSAmJiB0b3RhbENvbHNNZWRpdW0gPyBgc2xkcy1tZWRpdW0tc2l6ZS0tJHtjb2xzTWVkaXVtfS1vZi0ke2FkanVzdENvbHModG90YWxDb2xzTWVkaXVtKX1gIDogbnVsbCxcbiAgICAgIGNvbHNMYXJnZSAmJiB0b3RhbENvbHNNZWRpdW0gPyBgc2xkcy1sYXJnZS1zaXplLS0ke2NvbHNMYXJnZX0tb2YtJHthZGp1c3RDb2xzKHRvdGFsQ29sc0xhcmdlLCB0cnVlKX1gIDogbnVsbFxuICAgICk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXsgcm93Q2xhc3NOYW1lcyB9IHsgLi4ucHJvcHMgfT5cbiAgICAgICAgeyBjaGlsZHJlbiB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IENPTF9BTElHTlMgPSBbXG4gICd0b3AnLFxuICAnbWVkaXVtJyxcbiAgJ2JvdHRvbScsXG5dO1xuXG5Db2wucHJvcFR5cGVzID0ge1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHBhZGRlZDogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgUHJvcFR5cGVzLmJvb2wsXG4gICAgUHJvcFR5cGVzLnN0cmluZyxcbiAgXSksXG4gIGFsaWduOiBQcm9wVHlwZXMub25lT2YoQ09MX0FMSUdOUyksXG4gIG5vRmxleDogUHJvcFR5cGVzLmJvb2wsXG4gIG9yZGVyOiBQcm9wVHlwZXMubnVtYmVyLFxuICBvcmRlclNtYWxsOiBQcm9wVHlwZXMubnVtYmVyLFxuICBvcmRlck1lZGl1bTogUHJvcFR5cGVzLm51bWJlcixcbiAgb3JkZXJMYXJnZTogUHJvcFR5cGVzLm51bWJlcixcbiAgbm93cmFwOiBQcm9wVHlwZXMuYm9vbCxcbiAgY29sczogUHJvcFR5cGVzLm51bWJlcixcbiAgY29sc1NtYWxsOiBQcm9wVHlwZXMubnVtYmVyLFxuICBjb2xzTWVkaXVtOiBQcm9wVHlwZXMubnVtYmVyLFxuICBjb2xzTGFyZ2U6IFByb3BUeXBlcy5udW1iZXIsXG4gIHRvdGFsQ29sczogUHJvcFR5cGVzLm51bWJlcixcbiAgdG90YWxDb2xzU21hbGw6IFByb3BUeXBlcy5udW1iZXIsXG4gIHRvdGFsQ29sc01lZGl1bTogUHJvcFR5cGVzLm51bWJlcixcbiAgdG90YWxDb2xzTGFyZ2U6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgR3JpZDtcbiJdfQ==