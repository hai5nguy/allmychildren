'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _typeof2 = require('babel-runtime/helpers/typeof');

var _typeof3 = _interopRequireDefault(_typeof2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _uuid = require('uuid');

var _uuid2 = _interopRequireDefault(_uuid);

var _util = require('./util');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FormElement = function (_React$Component) {
  (0, _inherits3.default)(FormElement, _React$Component);

  function FormElement(props) {
    (0, _classCallCheck3.default)(this, FormElement);

    var _this = (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(FormElement).call(this, props));

    _this.state = { id: props.id || 'form-element-' + (0, _uuid2.default)() };
    (0, _util.registerStyle)('dropdown', [['.react-slds-dropdown-wrapper', '{ position: relative; }'], ['.slds-modal .react-slds-dropdown-wrapper', '{ position: absolute; }']]);
    return _this;
  }

  (0, _createClass3.default)(FormElement, [{
    key: 'renderFormElement',
    value: function renderFormElement(props) {
      var className = props.className;
      var label = props.label;
      var required = props.required;
      var error = props.error;
      var totalCols = props.totalCols;
      var pprops = (0, _objectWithoutProperties3.default)(props, ['className', 'label', 'required', 'error', 'totalCols']);

      var inputId = props.id || this.state.id;
      if (typeof totalCols === 'number') {
        return _react2.default.createElement(
          'label',
          { className: className },
          label ? _react2.default.createElement(
            'small',
            { className: 'slds-form-element__helper' },
            label
          ) : null,
          this.props.children
        );
      }
      var formElementClassNames = (0, _classnames2.default)('slds-form-element', {
        'slds-has-error': error,
        'slds-is-required': required
      });
      var errorMessage = error ? typeof error === 'string' ? error : (typeof error === 'undefined' ? 'undefined' : (0, _typeof3.default)(error)) === 'object' ? error.message : undefined : undefined;
      return _react2.default.createElement(
        'div',
        { className: formElementClassNames },
        label ? _react2.default.createElement(
          'label',
          { className: 'slds-form-element__label', htmlFor: inputId },
          label
        ) : null,
        _react2.default.createElement(
          'div',
          { className: className },
          this.props.children
        ),
        errorMessage ? _react2.default.createElement(
          'span',
          { className: 'slds-form-element__help' },
          errorMessage
        ) : undefined
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props;
      var className = _props.className;
      var cols = _props.cols;
      var dropdown = _props.dropdown;
      var props = (0, _objectWithoutProperties3.default)(_props, ['className', 'cols', 'dropdown']);

      var colNum = cols || 1;
      var ctrlClassNames = (0, _classnames2.default)('slds-form-element__control', typeof props.totalCols === 'number' ? 'slds-size--' + colNum + '-of-' + props.totalCols : null, className);
      if (dropdown) {
        return _react2.default.createElement(
          'div',
          { className: ctrlClassNames, style: { position: 'static' } },
          this.renderFormElement(props),
          _react2.default.createElement(
            'div',
            { className: 'react-slds-dropdown-wrapper' },
            dropdown
          )
        );
      }

      return this.renderFormElement((0, _extends3.default)({ className: ctrlClassNames }, props));
    }
  }]);
  return FormElement;
}(_react2.default.Component);

exports.default = FormElement;


FormElement.propTypes = {
  id: _react.PropTypes.string,
  dropdown: _react.PropTypes.element,
  className: _react.PropTypes.string,
  required: _react.PropTypes.bool,
  error: _react.PropTypes.bool,
  errorMessage: _react.PropTypes.string,
  cols: _react.PropTypes.number,
  children: _react.PropTypes.element
};

FormElement.isFormElement = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JpcHRzL0Zvcm1FbGVtZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQU1xQjs7O0FBRW5CLFdBRm1CLFdBRW5CLENBQVksS0FBWixFQUFtQjt3Q0FGQSxhQUVBOzs2RkFGQSx3QkFHWCxRQURXOztBQUVqQixVQUFLLEtBQUwsR0FBYSxFQUFFLElBQUksTUFBTSxFQUFOLElBQVksa0JBQWtCLHFCQUFsQixFQUEvQixDQUZpQjtBQUdqQiw2QkFBYyxVQUFkLEVBQTBCLENBQ3hCLENBQ0UsOEJBREYsRUFFRSx5QkFGRixDQUR3QixFQUt4QixDQUNFLDBDQURGLEVBRUUseUJBRkYsQ0FMd0IsQ0FBMUIsRUFIaUI7O0dBQW5COzs2QkFGbUI7O3NDQWlCRCxPQUFPO1VBQ2YsWUFBNEQsTUFBNUQsVUFEZTtVQUNKLFFBQWlELE1BQWpELE1BREk7VUFDRyxXQUEwQyxNQUExQyxTQURIO1VBQ2EsUUFBZ0MsTUFBaEMsTUFEYjtVQUNvQixZQUF5QixNQUF6QixVQURwQjtVQUNrQyxnREFBVyxpRUFEN0M7O0FBRXZCLFVBQU0sVUFBVSxNQUFNLEVBQU4sSUFBWSxLQUFLLEtBQUwsQ0FBVyxFQUFYLENBRkw7QUFHdkIsVUFBSSxPQUFPLFNBQVAsS0FBcUIsUUFBckIsRUFBK0I7QUFDakMsZUFDRTs7WUFBTyxXQUFZLFNBQVosRUFBUDtVQUVJLFFBQ0E7O2NBQU8sV0FBVSwyQkFBVixFQUFQO1lBQStDLEtBQS9DO1dBREEsR0FFQSxJQUZBO1VBSUEsS0FBSyxLQUFMLENBQVcsUUFBWDtTQVBOLENBRGlDO09BQW5DO0FBWUEsVUFBTSx3QkFBd0IsMEJBQzVCLG1CQUQ0QixFQUU1QjtBQUNFLDBCQUFrQixLQUFsQjtBQUNBLDRCQUFvQixRQUFwQjtPQUowQixDQUF4QixDQWZpQjtBQXNCdkIsVUFBTSxlQUNKLFFBQ0MsT0FBTyxLQUFQLEtBQWlCLFFBQWpCLEdBQTRCLEtBQTVCLEdBQ0EsUUFBTyxtRUFBUCxLQUFpQixRQUFqQixHQUE0QixNQUFNLE9BQU4sR0FDNUIsU0FEQSxHQUVELFNBSkEsQ0F2QnFCO0FBNEJ2QixhQUNFOztVQUFLLFdBQVkscUJBQVosRUFBTDtRQUVJLFFBQ0E7O1lBQU8sV0FBVSwwQkFBVixFQUFxQyxTQUFVLE9BQVYsRUFBNUM7VUFBa0UsS0FBbEU7U0FEQSxHQUVBLElBRkE7UUFJRjs7WUFBSyxXQUFZLFNBQVosRUFBTDtVQUNJLEtBQUssS0FBTCxDQUFXLFFBQVg7U0FQTjtRQVVJLGVBQ0E7O1lBQU0sV0FBVSx5QkFBVixFQUFOO1VBQTRDLFlBQTVDO1NBREEsR0FFQSxTQUZBO09BWE4sQ0E1QnVCOzs7OzZCQStDaEI7bUJBQ3lDLEtBQUssS0FBTCxDQUR6QztVQUNDLDZCQUREO1VBQ1ksbUJBRFo7VUFDa0IsMkJBRGxCO1VBQytCLDBGQUQvQjs7QUFFUCxVQUFNLFNBQVMsUUFBUSxDQUFSLENBRlI7QUFHUCxVQUFNLGlCQUFpQiwwQkFDckIsNEJBRHFCLEVBRXJCLE9BQU8sTUFBTSxTQUFOLEtBQW9CLFFBQTNCLG1CQUFvRCxrQkFBYSxNQUFNLFNBQU4sR0FBb0IsSUFBckYsRUFDQSxTQUhxQixDQUFqQixDQUhDO0FBUVAsVUFBSSxRQUFKLEVBQWM7QUFDWixlQUNFOztZQUFLLFdBQVksY0FBWixFQUE2QixPQUFRLEVBQUUsVUFBVSxRQUFWLEVBQVYsRUFBbEM7VUFDSSxLQUFLLGlCQUFMLENBQXVCLEtBQXZCLENBREo7VUFFRTs7Y0FBSyxXQUFVLDZCQUFWLEVBQUw7WUFDSSxRQURKO1dBRkY7U0FERixDQURZO09BQWQ7O0FBV0EsYUFBTyxLQUFLLGlCQUFMLDBCQUF5QixXQUFXLGNBQVgsSUFBOEIsTUFBdkQsQ0FBUCxDQW5CTzs7O1NBaEVVO0VBQW9CLGdCQUFNLFNBQU47O2tCQUFwQjs7O0FBd0ZyQixZQUFZLFNBQVosR0FBd0I7QUFDdEIsTUFBSSxpQkFBVSxNQUFWO0FBQ0osWUFBVSxpQkFBVSxPQUFWO0FBQ1YsYUFBVyxpQkFBVSxNQUFWO0FBQ1gsWUFBVSxpQkFBVSxJQUFWO0FBQ1YsU0FBTyxpQkFBVSxJQUFWO0FBQ1AsZ0JBQWMsaUJBQVUsTUFBVjtBQUNkLFFBQU0saUJBQVUsTUFBVjtBQUNOLFlBQVUsaUJBQVUsT0FBVjtDQVJaOztBQVdBLFlBQVksYUFBWixHQUE0QixJQUE1QiIsImZpbGUiOiJGb3JtRWxlbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQnO1xuaW1wb3J0IHsgcmVnaXN0ZXJTdHlsZSB9IGZyb20gJy4vdXRpbCc7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybUVsZW1lbnQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7IGlkOiBwcm9wcy5pZCB8fCAnZm9ybS1lbGVtZW50LScgKyB1dWlkKCkgfTtcbiAgICByZWdpc3RlclN0eWxlKCdkcm9wZG93bicsIFtcbiAgICAgIFtcbiAgICAgICAgJy5yZWFjdC1zbGRzLWRyb3Bkb3duLXdyYXBwZXInLFxuICAgICAgICAneyBwb3NpdGlvbjogcmVsYXRpdmU7IH0nLFxuICAgICAgXSxcbiAgICAgIFtcbiAgICAgICAgJy5zbGRzLW1vZGFsIC5yZWFjdC1zbGRzLWRyb3Bkb3duLXdyYXBwZXInLFxuICAgICAgICAneyBwb3NpdGlvbjogYWJzb2x1dGU7IH0nLFxuICAgICAgXSxcbiAgICBdKTtcbiAgfVxuXG4gIHJlbmRlckZvcm1FbGVtZW50KHByb3BzKSB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGxhYmVsLCByZXF1aXJlZCwgZXJyb3IsIHRvdGFsQ29scywgLi4ucHByb3BzIH0gPSBwcm9wcztcbiAgICBjb25zdCBpbnB1dElkID0gcHJvcHMuaWQgfHwgdGhpcy5zdGF0ZS5pZDtcbiAgICBpZiAodHlwZW9mIHRvdGFsQ29scyA9PT0gJ251bWJlcicpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxsYWJlbCBjbGFzc05hbWU9eyBjbGFzc05hbWUgfT5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbCA/XG4gICAgICAgICAgICA8c21hbGwgY2xhc3NOYW1lPSdzbGRzLWZvcm0tZWxlbWVudF9faGVscGVyJz57IGxhYmVsIH08L3NtYWxsPiA6XG4gICAgICAgICAgICBudWxsXG4gICAgICAgICAgfVxuICAgICAgICAgIHsgdGhpcy5wcm9wcy5jaGlsZHJlbiB9XG4gICAgICAgIDwvbGFiZWw+XG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBmb3JtRWxlbWVudENsYXNzTmFtZXMgPSBjbGFzc25hbWVzKFxuICAgICAgJ3NsZHMtZm9ybS1lbGVtZW50JyxcbiAgICAgIHtcbiAgICAgICAgJ3NsZHMtaGFzLWVycm9yJzogZXJyb3IsXG4gICAgICAgICdzbGRzLWlzLXJlcXVpcmVkJzogcmVxdWlyZWQsXG4gICAgICB9XG4gICAgKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPVxuICAgICAgZXJyb3IgP1xuICAgICAgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6XG4gICAgICAgdHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyA/IGVycm9yLm1lc3NhZ2UgOlxuICAgICAgIHVuZGVmaW5lZCkgOlxuICAgICAgdW5kZWZpbmVkO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17IGZvcm1FbGVtZW50Q2xhc3NOYW1lcyB9PlxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWwgP1xuICAgICAgICAgIDxsYWJlbCBjbGFzc05hbWU9J3NsZHMtZm9ybS1lbGVtZW50X19sYWJlbCcgaHRtbEZvcj17IGlucHV0SWQgfT57IGxhYmVsIH08L2xhYmVsPiA6XG4gICAgICAgICAgbnVsbFxuICAgICAgICB9XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXsgY2xhc3NOYW1lIH0+XG4gICAgICAgICAgeyB0aGlzLnByb3BzLmNoaWxkcmVuIH1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgP1xuICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nc2xkcy1mb3JtLWVsZW1lbnRfX2hlbHAnPnsgZXJyb3JNZXNzYWdlIH08L3NwYW4+IDpcbiAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGNsYXNzTmFtZSwgY29scywgZHJvcGRvd24sIC4uLnByb3BzIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGNvbE51bSA9IGNvbHMgfHwgMTtcbiAgICBjb25zdCBjdHJsQ2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMoXG4gICAgICAnc2xkcy1mb3JtLWVsZW1lbnRfX2NvbnRyb2wnLFxuICAgICAgdHlwZW9mIHByb3BzLnRvdGFsQ29scyA9PT0gJ251bWJlcicgPyBgc2xkcy1zaXplLS0ke2NvbE51bX0tb2YtJHtwcm9wcy50b3RhbENvbHN9YCA6IG51bGwsXG4gICAgICBjbGFzc05hbWVcbiAgICApO1xuICAgIGlmIChkcm9wZG93bikge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9eyBjdHJsQ2xhc3NOYW1lcyB9IHN0eWxlPXsgeyBwb3NpdGlvbjogJ3N0YXRpYycgfSB9PlxuICAgICAgICAgIHsgdGhpcy5yZW5kZXJGb3JtRWxlbWVudChwcm9wcykgfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyZWFjdC1zbGRzLWRyb3Bkb3duLXdyYXBwZXInPlxuICAgICAgICAgICAgeyBkcm9wZG93biB9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJGb3JtRWxlbWVudCh7IGNsYXNzTmFtZTogY3RybENsYXNzTmFtZXMsIC4uLnByb3BzIH0pO1xuICB9XG5cbn1cblxuRm9ybUVsZW1lbnQucHJvcFR5cGVzID0ge1xuICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZHJvcGRvd246IFByb3BUeXBlcy5lbGVtZW50LFxuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHJlcXVpcmVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgZXJyb3I6IFByb3BUeXBlcy5ib29sLFxuICBlcnJvck1lc3NhZ2U6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGNvbHM6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMuZWxlbWVudCxcbn07XG5cbkZvcm1FbGVtZW50LmlzRm9ybUVsZW1lbnQgPSB0cnVlO1xuIl19