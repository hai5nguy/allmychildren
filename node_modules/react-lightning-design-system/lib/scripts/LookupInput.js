'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends2 = require('babel-runtime/helpers/extends');

var _extends3 = _interopRequireDefault(_extends2);

var _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');

var _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);

var _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');

var _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _createClass2 = require('babel-runtime/helpers/createClass');

var _createClass3 = _interopRequireDefault(_createClass2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactDom = require('react-dom');

var _reactDom2 = _interopRequireDefault(_reactDom);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _FormElement = require('./FormElement');

var _FormElement2 = _interopRequireDefault(_FormElement);

var _Input = require('./Input');

var _Input2 = _interopRequireDefault(_Input);

var _Icon = require('./Icon');

var _Icon2 = _interopRequireDefault(_Icon);

var _Spinner = require('./Spinner');

var _Spinner2 = _interopRequireDefault(_Spinner);

var _Button = require('./Button');

var _Button2 = _interopRequireDefault(_Button);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 *
 */

var LookupSelection = (function (_Component) {
  (0, _inherits3.default)(LookupSelection, _Component);

  function LookupSelection() {
    (0, _classCallCheck3.default)(this, LookupSelection);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(LookupSelection).apply(this, arguments));
  }

  (0, _createClass3.default)(LookupSelection, [{
    key: 'onKeyDown',
    value: function onKeyDown(e) {
      if (e.keyCode === 8 || e.keyCode === 46) {
        // Bacspace / DEL
        e.preventDefault();
        e.stopPropagation();
        if (this.props.onResetSelection) {
          this.props.onResetSelection();
        }
      }
    }
  }, {
    key: 'renderPill',
    value: function renderPill(selected) {
      var onPillClick = function onPillClick(e) {
        e.target.focus();
        e.preventDefault();
        e.stopPropagation();
      };
      return _react2.default.createElement(
        'a',
        { className: 'slds-pill',
          ref: 'pill',
          onKeyDown: this.onKeyDown.bind(this),
          onClick: onPillClick,
          tabIndex: 0
        },
        selected.icon ? _react2.default.createElement(_Icon2.default, { className: 'slds-pill__icon', category: selected.category, icon: selected.icon }) : undefined,
        _react2.default.createElement(
          'span',
          { className: 'slds-pill__label' },
          selected.label
        ),
        _react2.default.createElement(_Button2.default, { className: 'slds-pill__remove', type: 'icon-bare', icon: 'close', alt: 'Remove',
          tabIndex: -1,
          onClick: this.props.onResetSelection
        })
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var _props = this.props;
      var className = _props.className;
      var hidden = _props.hidden;
      var selected = _props.selected;
      var props = (0, _objectWithoutProperties3.default)(_props, ['className', 'hidden', 'selected']);

      var lookupClassNames = (0, _classnames2.default)('slds-lookup', 'slds-has-selection', className, { 'slds-hide': hidden });
      return _react2.default.createElement(
        'div',
        { className: lookupClassNames, 'data-select': 'single', 'data-scope': 'single', 'data-typeahead': false },
        _react2.default.createElement(
          'div',
          { className: 'slds-pill__container' },
          selected ? this.renderPill(selected) : undefined
        )
      );
    }
  }]);
  return LookupSelection;
})(_react.Component);

var LookupEntryType = _react.PropTypes.shape({
  category: _react.PropTypes.string,
  icon: _react.PropTypes.string,
  label: _react.PropTypes.string,
  value: _react.PropTypes.string
});

LookupSelection.propTypes = {
  className: _react.PropTypes.string,
  selected: LookupEntryType,
  hidden: _react.PropTypes.bool,
  onResetSelection: _react.PropTypes.func
};

/**
 *
 */

var LookupSearch = (function (_Component2) {
  (0, _inherits3.default)(LookupSearch, _Component2);

  function LookupSearch() {
    (0, _classCallCheck3.default)(this, LookupSearch);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(LookupSearch).apply(this, arguments));
  }

  (0, _createClass3.default)(LookupSearch, [{
    key: 'onLookupIconClick',
    value: function onLookupIconClick() {
      this.props.onSubmit();
    }
  }, {
    key: 'onInputKeyDown',
    value: function onInputKeyDown(e) {
      if (e.keyCode === 13) {
        // return key
        e.preventDefault();
        e.stopPropagation();
        var searchText = e.target.value;
        if (searchText) {
          this.props.onSubmit();
        } else {
          this.props.onComplete();
        }
      } else if (e.keyCode === 40) {
        // down key
        e.preventDefault();
        e.stopPropagation();
        this.props.onPressDown();
      } else if (e.keyCode === 27) {
        // ESC
        e.preventDefault();
        e.stopPropagation();
        this.props.onComplete();
      }
      if (this.props.onKeyDown) {
        this.props.onKeyDown(e);
      }
    }
  }, {
    key: 'onInputChange',
    value: function onInputChange(e) {
      var searchText = e.target.value;
      this.props.onChange(searchText);
    }
  }, {
    key: 'onInputBlur',
    value: function onInputBlur(e) {
      if (this.props.onBlur) {
        this.props.onBlur(e);
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props;
      var className = _props2.className;
      var hidden = _props2.hidden;
      var searchText = _props2.searchText;
      var props = (0, _objectWithoutProperties3.default)(_props2, ['className', 'hidden', 'searchText']);

      var lookupSearchClassNames = (0, _classnames2.default)('slds-input-has-icon', 'slds-input-has-icon--right', className, { 'slds-hide': hidden });
      return _react2.default.createElement(
        'div',
        { className: lookupSearchClassNames },
        _react2.default.createElement(_Input2.default, (0, _extends3.default)({}, props, {
          ref: 'input',
          value: searchText,
          onKeyDown: this.onInputKeyDown.bind(this),
          onChange: this.onInputChange.bind(this),
          onBlur: this.onInputBlur.bind(this)
        })),
        _react2.default.createElement(_Icon2.default, { icon: 'search', className: 'slds-input__icon', style: { cursor: 'pointer' },
          onClick: this.onLookupIconClick.bind(this)
        })
      );
    }
  }]);
  return LookupSearch;
})(_react.Component);

LookupSearch.propTypes = {
  className: _react.PropTypes.string,
  hidden: _react.PropTypes.bool,
  searchText: _react.PropTypes.string,
  onKeyDown: _react.PropTypes.func,
  onBlur: _react.PropTypes.func,
  onChange: _react.PropTypes.func,
  onPressDown: _react.PropTypes.func,
  onSubmit: _react.PropTypes.func,
  onComplete: _react.PropTypes.func
};

/**
 *
 */

var LookupCandidateList = (function (_Component3) {
  (0, _inherits3.default)(LookupCandidateList, _Component3);

  function LookupCandidateList() {
    (0, _classCallCheck3.default)(this, LookupCandidateList);
    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(LookupCandidateList).apply(this, arguments));
  }

  (0, _createClass3.default)(LookupCandidateList, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      if (this.props.focus) {
        this.focusToTargetItemEl(0);
      }
    }
  }, {
    key: 'componentDidUpdate',
    value: function componentDidUpdate(prevProps) {
      if (this.props.focus && !prevProps.focus) {
        this.focusToTargetItemEl(0);
      }
    }
  }, {
    key: 'onSelect',
    value: function onSelect(entry) {
      if (this.props.onSelect) {
        this.props.onSelect(entry);
      }
    }
  }, {
    key: 'onKeyDown',
    value: function onKeyDown(e) {
      if (e.keyCode === 38 || e.keyCode === 40) {
        // UP/DOWN
        e.preventDefault();
        e.stopPropagation();
        var currentEl = e.target.parentElement;
        var itemEl = e.keyCode === 40 ? currentEl.nextSibling : currentEl.previousSibling;
        while (itemEl) {
          var anchorEl = itemEl.querySelector('.react-slds-candidate[tabIndex]');
          if (anchorEl && !anchorEl.disabled) {
            anchorEl.focus();
            return;
          }
          itemEl = e.keyCode === 40 ? itemEl.nextSibling : itemEl.previousSibling;
        }
      } else if (e.keyCode === 27) {
        // ESC
        e.preventDefault();
        e.stopPropagation();
        this.onSelect(null);
      }
    }
  }, {
    key: 'focusToTargetItemEl',
    value: function focusToTargetItemEl(index) {
      var el = _reactDom2.default.findDOMNode(this);
      var anchors = el.querySelectorAll('.react-slds-candidate[tabIndex]');
      if (anchors[index]) {
        anchors[index].focus();
      }
    }
  }, {
    key: 'renderCandidate',
    value: function renderCandidate(entry) {
      var _this4 = this;

      return _react2.default.createElement(
        'li',
        { className: 'slds-lookup__item', key: entry.value },
        _react2.default.createElement(
          'a',
          { className: 'slds-truncate react-slds-candidate', tabIndex: -1, role: 'option',
            onKeyDown: function onKeyDown(e) {
              return e.keyCode === 13 && _this4.onSelect(entry);
            },
            onBlur: this.props.onBlur,
            onClick: function onClick() {
              return _this4.onSelect(entry);
            }
          },
          entry.icon ? _react2.default.createElement(_Icon2.default, { category: entry.category, icon: entry.icon, size: 'small' }) : undefined,
          entry.label
        )
      );
    }
  }, {
    key: 'render',
    value: function render() {
      var _props3 = this.props;
      var _props3$data = _props3.data;
      var data = _props3$data === undefined ? [] : _props3$data;
      var hidden = _props3.hidden;
      var loading = _props3.loading;
      var header = _props3.header;
      var footer = _props3.footer;
      var _props3$filter = _props3.filter;
      var filter = _props3$filter === undefined ? function () {
        return true;
      } : _props3$filter;

      var lookupMenuClassNames = (0, _classnames2.default)('slds-lookup__menu', { 'slds-hide': hidden });
      return _react2.default.createElement(
        'div',
        { className: lookupMenuClassNames, role: 'listbox',
          onKeyDown: this.onKeyDown.bind(this)
        },
        header ? _react2.default.createElement(
          'div',
          { className: 'slds-lookup__item' },
          header
        ) : undefined,
        _react2.default.createElement(
          'ul',
          { className: 'slds-lookup__list', role: 'presentation' },
          data.filter(filter).map(this.renderCandidate.bind(this)),
          loading ? _react2.default.createElement(
            'li',
            { className: 'slds-lookup__item', key: 'loading' },
            _react2.default.createElement(_Spinner2.default, { size: 'small', style: { margin: '0 auto' } })
          ) : undefined
        ),
        footer ? _react2.default.createElement(
          'div',
          { className: 'slds-lookup__item' },
          footer
        ) : undefined
      );
    }
  }]);
  return LookupCandidateList;
})(_react.Component);

LookupCandidateList.propTypes = {
  data: _react.PropTypes.arrayOf(LookupEntryType),
  focus: _react.PropTypes.bool,
  loading: _react.PropTypes.bool,
  hidden: _react.PropTypes.bool,
  filter: _react.PropTypes.func,
  onSelect: _react.PropTypes.func,
  onBlur: _react.PropTypes.func,
  header: _react.PropTypes.node,
  footer: _react.PropTypes.node
};

/**
 *
 */

var LookupInput = (function (_Component4) {
  (0, _inherits3.default)(LookupInput, _Component4);

  function LookupInput(props) {
    (0, _classCallCheck3.default)(this, LookupInput);

    var _this5 = (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(LookupInput).call(this, props));

    _this5.state = {
      selected: props.defaultSelected,
      opened: props.defaultOpened,
      searchText: props.defaultSearchText,
      focusFirstCandidate: false
    };
    return _this5;
  }

  (0, _createClass3.default)(LookupInput, [{
    key: 'onSearchTextChange',
    value: function onSearchTextChange(searchText) {
      this.setState({ searchText: searchText });
      if (this.props.onSearchTextChange) {
        this.props.onSearchTextChange(searchText);
      }
    }
  }, {
    key: 'onLookupRequest',
    value: function onLookupRequest(searchText) {
      this.setState({ opened: true });
      if (this.props.onLookupRequest) {
        this.props.onLookupRequest(searchText);
      }
    }
  }, {
    key: 'onLookupCancel',
    value: function onLookupCancel() {
      this.setState({ opened: false });
      if (this.props.onLookupCancel) {
        this.props.onLookupCancel();
      }
    }
  }, {
    key: 'onResetSelection',
    value: function onResetSelection() {
      var _this6 = this;

      this.setState({ selected: null });
      if (this.props.onSelect) {
        this.props.onSelect(null);
      }
      this.onSearchTextChange('');
      this.onLookupRequest('');
      setTimeout(function () {
        var searchElem = _reactDom2.default.findDOMNode(_this6.refs.search);
        var inputElem = searchElem.querySelector('input');
        inputElem.focus();
      }, 10);
    }
  }, {
    key: 'onLookupItemSelect',
    value: function onLookupItemSelect(selected) {
      var _this7 = this;

      if (selected) {
        this.setState({ selected: selected, opened: false });
        if (this.props.onSelect) {
          this.props.onSelect(selected);
        }
        setTimeout(function () {
          var selectionElem = _reactDom2.default.findDOMNode(_this7.refs.selection);
          var pillElem = selectionElem.querySelector('a');
          if (pillElem) {
            pillElem.focus();
          }
        }, 10);
      } else {
        this.setState({ opened: false });
        setTimeout(function () {
          var searchElem = _reactDom2.default.findDOMNode(_this7.refs.search);
          var inputElem = searchElem.querySelector('input');
          inputElem.focus();
        }, 10);
      }
      if (this.props.onComplete) {
        this.props.onComplete();
      }
    }
  }, {
    key: 'onFocusFirstCandidate',
    value: function onFocusFirstCandidate() {
      var _this8 = this;

      var _props$opened = this.props.opened;
      var opened = _props$opened === undefined ? this.state.opened : _props$opened;

      if (!opened) {
        this.onLookupRequest(this.state.searchText);
      } else {
        this.setState({ focusFirstCandidate: true });
        setTimeout(function () {
          _this8.setState({ focusFirstCandidate: false });
        }, 10);
      }
    }
  }, {
    key: 'onBlur',
    value: function onBlur() {
      var _this9 = this;

      setTimeout(function () {
        if (!_this9.isFocusedInComponent()) {
          _this9.setState({ opened: false });
          if (_this9.props.onBlur) {
            _this9.props.onBlur();
          }
          if (_this9.props.onComplete) {
            _this9.props.onComplete();
          }
        }
      }, 10);
    }
  }, {
    key: 'isFocusedInComponent',
    value: function isFocusedInComponent() {
      var rootEl = _reactDom2.default.findDOMNode(this);
      var targetEl = document.activeElement;
      while (targetEl && targetEl !== rootEl) {
        targetEl = targetEl.parentNode;
      }
      return !!targetEl;
    }
  }, {
    key: 'render',
    value: function render() {
      var _this10 = this;

      var _props4 = this.props;
      var totalCols = _props4.totalCols;
      var cols = _props4.cols;
      var label = _props4.label;
      var _props4$selected = _props4.selected;
      var selected = _props4$selected === undefined ? this.state.selected : _props4$selected;
      var defaultSelected = _props4.defaultSelected;
      var _props4$opened = _props4.opened;
      var opened = _props4$opened === undefined ? this.state.opened : _props4$opened;
      var defaultOpened = _props4.defaultOpened;
      var _props4$searchText = _props4.searchText;
      var searchText = _props4$searchText === undefined ? this.state.searchText : _props4$searchText;
      var defaultSearchText = _props4.defaultSearchText;
      var lookupFilter = _props4.lookupFilter;
      var listHeader = _props4.listHeader;
      var listFooter = _props4.listFooter;
      var data = _props4.data;
      var props = (0, _objectWithoutProperties3.default)(_props4, ['totalCols', 'cols', 'label', 'selected', 'defaultSelected', 'opened', 'defaultOpened', 'searchText', 'defaultSearchText', 'lookupFilter', 'listHeader', 'listFooter', 'data']);

      var dropdown = _react2.default.createElement(LookupCandidateList, (0, _extends3.default)({}, props, {
        ref: 'candidateList',
        data: data,
        focus: this.state.focusFirstCandidate,
        hidden: !opened,
        filter: lookupFilter ? function (entry) {
          return lookupFilter(entry, searchText);
        } : undefined,
        header: listHeader,
        footer: listFooter,
        onSelect: this.onLookupItemSelect.bind(this),
        onBlur: this.onBlur.bind(this)
      }));
      var formElemProps = { id: props.id, totalCols: totalCols, cols: cols, label: label, dropdown: dropdown };
      return _react2.default.createElement(
        _FormElement2.default,
        formElemProps,
        _react2.default.createElement(
          'div',
          null,
          _react2.default.createElement(LookupSelection, (0, _extends3.default)({}, props, {
            ref: 'selection',
            selected: selected,
            hidden: !selected,
            onResetSelection: this.onResetSelection.bind(this)
          })),
          _react2.default.createElement(LookupSearch, (0, _extends3.default)({}, props, {
            ref: 'search',
            hidden: !!selected,
            searchText: searchText,
            onChange: this.onSearchTextChange.bind(this),
            onSubmit: function onSubmit() {
              return _this10.onLookupRequest(searchText);
            },
            onPressDown: this.onFocusFirstCandidate.bind(this),
            onComplete: this.onLookupCancel.bind(this),
            onBlur: this.onBlur.bind(this)
          }))
        )
      );
    }
  }]);
  return LookupInput;
})(_react.Component);

exports.default = LookupInput;

LookupInput.propTypes = {
  className: _react.PropTypes.string,
  label: _react.PropTypes.string,
  value: _react.PropTypes.string,
  defaultValue: _react.PropTypes.string,
  selected: LookupEntryType,
  defaultSelected: LookupEntryType,
  opened: _react.PropTypes.bool,
  defaultOpened: _react.PropTypes.bool,
  searchText: _react.PropTypes.string,
  defaultSearchText: _react.PropTypes.string,
  data: _react.PropTypes.arrayOf(LookupEntryType),
  lookupFilter: _react.PropTypes.func,
  listHeader: _react.PropTypes.node,
  listFooter: _react.PropTypes.node,
  onBlur: _react.PropTypes.func,
  onSearchTextChange: _react.PropTypes.func,
  onLookupRequest: _react.PropTypes.func,
  onLookupCancel: _react.PropTypes.func,
  onSelect: _react.PropTypes.func,
  onComplete: _react.PropTypes.func,
  totalCols: _react.PropTypes.number,
  cols: _react.PropTypes.number
};

LookupInput.isFormElement = true;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zY3JpcHRzL0xvb2t1cElucHV0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQVlNLGVBQWU7MEJBQWYsZUFBZTs7V0FBZixlQUFlO3dDQUFmLGVBQWU7d0ZBQWYsZUFBZTs7OzZCQUFmLGVBQWU7OzhCQUNULENBQUMsRUFBRTtBQUNYLFVBQUksQ0FBQyxDQUFDLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sS0FBSyxFQUFFLEVBQUU7O0FBQ3ZDLFNBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUNuQixTQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDcEIsWUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixFQUFFO0FBQy9CLGNBQUksQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztTQUMvQjtPQUNGO0tBQ0Y7OzsrQkFFVSxRQUFRLEVBQUU7QUFDbkIsVUFBTSxXQUFXLEdBQUcsU0FBZCxXQUFXLENBQUksQ0FBQyxFQUFLO0FBQ3pCLFNBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDakIsU0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ25CLFNBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztPQUNyQixDQUFDO0FBQ0YsYUFDRTs7VUFBRyxTQUFTLEVBQUMsV0FBVztBQUN0QixhQUFHLEVBQUMsTUFBTTtBQUNWLG1CQUFTLEVBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEFBQUU7QUFDdkMsaUJBQU8sRUFBRyxXQUFXLEFBQUU7QUFDdkIsa0JBQVEsRUFBRyxDQUFDLEFBQUU7O1FBR1osUUFBUSxDQUFDLElBQUksR0FDYixnREFBTSxTQUFTLEVBQUMsaUJBQWlCLEVBQUMsUUFBUSxFQUFHLFFBQVEsQ0FBQyxRQUFRLEFB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RSxPQS9jaUIsU0FBUyxDQStjaEIsSUFBSTtBQUN0QixvQkFBa0IsRUFBRSxPQWhkSyxTQUFTLENBZ2RKLElBQUk7QUFDbEMsaUJBQWUsRUFBRSxPQWpkUSxTQUFTLENBaWRQLElBQUk7QUFDL0IsZ0JBQWMsRUFBRSxPQWxkUyxTQUFTLENBa2RSLElBQUk7QUFDOUIsVUFBUSxFQUFFLE9BbmRlLFNBQVMsQ0FtZGQsSUFBSTtBQUN4QixZQUFVLEVBQUUsT0FwZGEsU0FBUyxDQW9kWixJQUFJO0FBQzFCLFdBQVMsRUFBRSxPQXJkYyxTQUFTLENBcWRiLE1BQU07QUFDM0IsTUFBSSxFQUFFLE9BdGRtQixTQUFTLENBc2RsQixNQUFNO0NBQ3ZCLENBQUM7O0FBRUYsV0FBVyxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMiLCJmaWxlIjoiTG9va3VwSW5wdXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50LCBQcm9wVHlwZXMgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IEZvcm1FbGVtZW50IGZyb20gJy4vRm9ybUVsZW1lbnQnO1xuaW1wb3J0IElucHV0IGZyb20gJy4vSW5wdXQnO1xuaW1wb3J0IEljb24gZnJvbSAnLi9JY29uJztcbmltcG9ydCBTcGlubmVyIGZyb20gJy4vU3Bpbm5lcic7XG5pbXBvcnQgQnV0dG9uIGZyb20gJy4vQnV0dG9uJztcblxuLyoqXG4gKlxuICovXG5jbGFzcyBMb29rdXBTZWxlY3Rpb24gZXh0ZW5kcyBDb21wb25lbnQge1xuICBvbktleURvd24oZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDggfHwgZS5rZXlDb2RlID09PSA0NikgeyAvLyBCYWNzcGFjZSAvIERFTFxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uUmVzZXRTZWxlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5wcm9wcy5vblJlc2V0U2VsZWN0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyUGlsbChzZWxlY3RlZCkge1xuICAgIGNvbnN0IG9uUGlsbENsaWNrID0gKGUpID0+IHtcbiAgICAgIGUudGFyZ2V0LmZvY3VzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH07XG4gICAgcmV0dXJuIChcbiAgICAgIDxhIGNsYXNzTmFtZT0nc2xkcy1waWxsJ1xuICAgICAgICByZWY9J3BpbGwnXG4gICAgICAgIG9uS2V5RG93bj17IHRoaXMub25LZXlEb3duLmJpbmQodGhpcykgfVxuICAgICAgICBvbkNsaWNrPXsgb25QaWxsQ2xpY2sgfVxuICAgICAgICB0YWJJbmRleD17IDAgfVxuICAgICAgPlxuICAgICAgICB7XG4gICAgICAgICAgc2VsZWN0ZWQuaWNvbiA/XG4gICAgICAgICAgPEljb24gY2xhc3NOYW1lPSdzbGRzLXBpbGxfX2ljb24nIGNhdGVnb3J5PXsgc2VsZWN0ZWQuY2F0ZWdvcnkgfSBpY29uPXsgc2VsZWN0ZWQuaWNvbiB9IC8+IDpcbiAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9J3NsZHMtcGlsbF9fbGFiZWwnPnsgc2VsZWN0ZWQubGFiZWwgfTwvc3Bhbj5cbiAgICAgICAgPEJ1dHRvbiBjbGFzc05hbWU9J3NsZHMtcGlsbF9fcmVtb3ZlJyB0eXBlPSdpY29uLWJhcmUnIGljb249J2Nsb3NlJyBhbHQ9J1JlbW92ZSdcbiAgICAgICAgICB0YWJJbmRleD17IC0xIH1cbiAgICAgICAgICBvbkNsaWNrPXsgdGhpcy5wcm9wcy5vblJlc2V0U2VsZWN0aW9uIH1cbiAgICAgICAgLz5cbiAgICAgIDwvYT5cbiAgICApO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHsgY2xhc3NOYW1lLCBoaWRkZW4sIHNlbGVjdGVkLCAuLi5wcm9wcyB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBsb29rdXBDbGFzc05hbWVzID0gY2xhc3NuYW1lcyhcbiAgICAgICdzbGRzLWxvb2t1cCcsXG4gICAgICAnc2xkcy1oYXMtc2VsZWN0aW9uJyxcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIHsgJ3NsZHMtaGlkZSc6IGhpZGRlbiB9XG4gICAgKTtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9eyBsb29rdXBDbGFzc05hbWVzIH0gZGF0YS1zZWxlY3Q9J3NpbmdsZScgZGF0YS1zY29wZT0nc2luZ2xlJyBkYXRhLXR5cGVhaGVhZD17IGZhbHNlIH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzbGRzLXBpbGxfX2NvbnRhaW5lcic+XG4gICAgICAgICAgeyBzZWxlY3RlZCA/IHRoaXMucmVuZGVyUGlsbChzZWxlY3RlZCkgOiB1bmRlZmluZWQgfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxufVxuXG5jb25zdCBMb29rdXBFbnRyeVR5cGUgPSBQcm9wVHlwZXMuc2hhcGUoe1xuICBjYXRlZ29yeTogUHJvcFR5cGVzLnN0cmluZyxcbiAgaWNvbjogUHJvcFR5cGVzLnN0cmluZyxcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxufSk7XG5cbkxvb2t1cFNlbGVjdGlvbi5wcm9wVHlwZXMgPSB7XG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgc2VsZWN0ZWQ6IExvb2t1cEVudHJ5VHlwZSxcbiAgaGlkZGVuOiBQcm9wVHlwZXMuYm9vbCxcbiAgb25SZXNldFNlbGVjdGlvbjogUHJvcFR5cGVzLmZ1bmMsXG59O1xuXG5cbi8qKlxuICpcbiAqL1xuY2xhc3MgTG9va3VwU2VhcmNoIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBvbkxvb2t1cEljb25DbGljaygpIHtcbiAgICB0aGlzLnByb3BzLm9uU3VibWl0KCk7XG4gIH1cblxuICBvbklucHV0S2V5RG93bihlKSB7XG4gICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHsgLy8gcmV0dXJuIGtleVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIGlmIChzZWFyY2hUZXh0KSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TdWJtaXQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucHJvcHMub25Db21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSA0MCkgeyAvLyBkb3duIGtleVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMucHJvcHMub25QcmVzc0Rvd24oKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRVNDXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5wcm9wcy5vbkNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uS2V5RG93bikge1xuICAgICAgdGhpcy5wcm9wcy5vbktleURvd24oZSk7XG4gICAgfVxuICB9XG5cbiAgb25JbnB1dENoYW5nZShlKSB7XG4gICAgY29uc3Qgc2VhcmNoVGV4dCA9IGUudGFyZ2V0LnZhbHVlO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoc2VhcmNoVGV4dCk7XG4gIH1cblxuICBvbklucHV0Qmx1cihlKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25CbHVyKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQmx1cihlKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBjbGFzc05hbWUsIGhpZGRlbiwgc2VhcmNoVGV4dCwgLi4ucHJvcHMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgbG9va3VwU2VhcmNoQ2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMoXG4gICAgICAnc2xkcy1pbnB1dC1oYXMtaWNvbicsXG4gICAgICAnc2xkcy1pbnB1dC1oYXMtaWNvbi0tcmlnaHQnLFxuICAgICAgY2xhc3NOYW1lLFxuICAgICAgeyAnc2xkcy1oaWRlJzogaGlkZGVuIH1cbiAgICApO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17IGxvb2t1cFNlYXJjaENsYXNzTmFtZXMgfT5cbiAgICAgICAgPElucHV0IHsgLi4ucHJvcHMgfVxuICAgICAgICAgIHJlZj0naW5wdXQnXG4gICAgICAgICAgdmFsdWU9eyBzZWFyY2hUZXh0IH1cbiAgICAgICAgICBvbktleURvd249eyB0aGlzLm9uSW5wdXRLZXlEb3duLmJpbmQodGhpcykgfVxuICAgICAgICAgIG9uQ2hhbmdlPXsgdGhpcy5vbklucHV0Q2hhbmdlLmJpbmQodGhpcykgfVxuICAgICAgICAgIG9uQmx1cj17IHRoaXMub25JbnB1dEJsdXIuYmluZCh0aGlzKSB9XG4gICAgICAgIC8+XG4gICAgICAgIDxJY29uIGljb249J3NlYXJjaCcgY2xhc3NOYW1lPSdzbGRzLWlucHV0X19pY29uJyBzdHlsZT17IHsgY3Vyc29yOiAncG9pbnRlcicgfSB9XG4gICAgICAgICAgb25DbGljaz17IHRoaXMub25Mb29rdXBJY29uQ2xpY2suYmluZCh0aGlzKSB9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbn1cblxuXG5Mb29rdXBTZWFyY2gucHJvcFR5cGVzID0ge1xuICBjbGFzc05hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGhpZGRlbjogUHJvcFR5cGVzLmJvb2wsXG4gIHNlYXJjaFRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIG9uS2V5RG93bjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uQmx1cjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25QcmVzc0Rvd246IFByb3BUeXBlcy5mdW5jLFxuICBvblN1Ym1pdDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuLyoqXG4gKlxuICovXG5jbGFzcyBMb29rdXBDYW5kaWRhdGVMaXN0IGV4dGVuZHMgQ29tcG9uZW50IHtcblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5mb2N1cykge1xuICAgICAgdGhpcy5mb2N1c1RvVGFyZ2V0SXRlbUVsKDApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5mb2N1cyAmJiAhcHJldlByb3BzLmZvY3VzKSB7XG4gICAgICB0aGlzLmZvY3VzVG9UYXJnZXRJdGVtRWwoMCk7XG4gICAgfVxuICB9XG5cbiAgb25TZWxlY3QoZW50cnkpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNlbGVjdCkge1xuICAgICAgdGhpcy5wcm9wcy5vblNlbGVjdChlbnRyeSk7XG4gICAgfVxuICB9XG5cbiAgb25LZXlEb3duKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAzOCB8fCBlLmtleUNvZGUgPT09IDQwKSB7IC8vIFVQL0RPV05cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCBjdXJyZW50RWwgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgbGV0IGl0ZW1FbCA9IGUua2V5Q29kZSA9PT0gNDAgPyBjdXJyZW50RWwubmV4dFNpYmxpbmcgOiBjdXJyZW50RWwucHJldmlvdXNTaWJsaW5nO1xuICAgICAgd2hpbGUgKGl0ZW1FbCkge1xuICAgICAgICBjb25zdCBhbmNob3JFbCA9IGl0ZW1FbC5xdWVyeVNlbGVjdG9yKCcucmVhY3Qtc2xkcy1jYW5kaWRhdGVbdGFiSW5kZXhdJyk7XG4gICAgICAgIGlmIChhbmNob3JFbCAmJiAhYW5jaG9yRWwuZGlzYWJsZWQpIHtcbiAgICAgICAgICBhbmNob3JFbC5mb2N1cygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpdGVtRWwgPSBlLmtleUNvZGUgPT09IDQwID8gaXRlbUVsLm5leHRTaWJsaW5nIDogaXRlbUVsLnByZXZpb3VzU2libGluZztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRVNDXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5vblNlbGVjdChudWxsKTtcbiAgICB9XG4gIH1cblxuICBmb2N1c1RvVGFyZ2V0SXRlbUVsKGluZGV4KSB7XG4gICAgY29uc3QgZWwgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICBjb25zdCBhbmNob3JzID0gZWwucXVlcnlTZWxlY3RvckFsbCgnLnJlYWN0LXNsZHMtY2FuZGlkYXRlW3RhYkluZGV4XScpO1xuICAgIGlmIChhbmNob3JzW2luZGV4XSkge1xuICAgICAgYW5jaG9yc1tpbmRleF0uZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICByZW5kZXJDYW5kaWRhdGUoZW50cnkpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGxpIGNsYXNzTmFtZT0nc2xkcy1sb29rdXBfX2l0ZW0nIGtleT17IGVudHJ5LnZhbHVlIH0+XG4gICAgICAgIDxhIGNsYXNzTmFtZT0nc2xkcy10cnVuY2F0ZSByZWFjdC1zbGRzLWNhbmRpZGF0ZScgdGFiSW5kZXg9eyAtMSB9IHJvbGU9J29wdGlvbidcbiAgICAgICAgICBvbktleURvd249eyAoZSkgPT4gZS5rZXlDb2RlID09PSAxMyAmJiB0aGlzLm9uU2VsZWN0KGVudHJ5KSB9XG4gICAgICAgICAgb25CbHVyPXsgdGhpcy5wcm9wcy5vbkJsdXIgfVxuICAgICAgICAgIG9uQ2xpY2s9eyAoKSA9PiB0aGlzLm9uU2VsZWN0KGVudHJ5KSB9XG4gICAgICAgID5cbiAgICAgICAgICB7XG4gICAgICAgICAgICBlbnRyeS5pY29uID9cbiAgICAgICAgICAgIDxJY29uIGNhdGVnb3J5PXsgZW50cnkuY2F0ZWdvcnkgfSBpY29uPXsgZW50cnkuaWNvbiB9IHNpemU9J3NtYWxsJyAvPiA6XG4gICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICB9XG4gICAgICAgICAgeyBlbnRyeS5sYWJlbCB9XG4gICAgICAgIDwvYT5cbiAgICAgIDwvbGk+XG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IGRhdGEgPSBbXSwgaGlkZGVuLCBsb2FkaW5nLCBoZWFkZXIsIGZvb3RlciwgZmlsdGVyID0gKCkgPT4gdHJ1ZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBsb29rdXBNZW51Q2xhc3NOYW1lcyA9IGNsYXNzbmFtZXMoXG4gICAgICAnc2xkcy1sb29rdXBfX21lbnUnLFxuICAgICAgeyAnc2xkcy1oaWRlJzogaGlkZGVuIH1cbiAgICApO1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT17IGxvb2t1cE1lbnVDbGFzc05hbWVzIH0gcm9sZT0nbGlzdGJveCdcbiAgICAgICAgb25LZXlEb3duPXsgdGhpcy5vbktleURvd24uYmluZCh0aGlzKSB9XG4gICAgICA+XG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXIgP1xuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzbGRzLWxvb2t1cF9faXRlbSc+eyBoZWFkZXIgfTwvZGl2PiA6XG4gICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgIH1cbiAgICAgICAgPHVsIGNsYXNzTmFtZT0nc2xkcy1sb29rdXBfX2xpc3QnIHJvbGU9J3ByZXNlbnRhdGlvbic+XG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YS5maWx0ZXIoZmlsdGVyKS5tYXAodGhpcy5yZW5kZXJDYW5kaWRhdGUuYmluZCh0aGlzKSlcbiAgICAgICAgICB9XG4gICAgICAgICAge1xuICAgICAgICAgICAgbG9hZGluZyA/XG4gICAgICAgICAgICA8bGkgY2xhc3NOYW1lPSdzbGRzLWxvb2t1cF9faXRlbScga2V5PSdsb2FkaW5nJz5cbiAgICAgICAgICAgICAgPFNwaW5uZXIgc2l6ZT0nc21hbGwnIHN0eWxlPXsgeyBtYXJnaW46ICcwIGF1dG8nIH0gfSAvPlxuICAgICAgICAgICAgPC9saT4gOlxuICAgICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICA8L3VsPlxuICAgICAgICB7XG4gICAgICAgICAgZm9vdGVyID9cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nc2xkcy1sb29rdXBfX2l0ZW0nPnsgZm9vdGVyIH08L2Rpdj4gOlxuICAgICAgICAgIHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbn1cblxuTG9va3VwQ2FuZGlkYXRlTGlzdC5wcm9wVHlwZXMgPSB7XG4gIGRhdGE6IFByb3BUeXBlcy5hcnJheU9mKExvb2t1cEVudHJ5VHlwZSksXG4gIGZvY3VzOiBQcm9wVHlwZXMuYm9vbCxcbiAgbG9hZGluZzogUHJvcFR5cGVzLmJvb2wsXG4gIGhpZGRlbjogUHJvcFR5cGVzLmJvb2wsXG4gIGZpbHRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uU2VsZWN0OiBQcm9wVHlwZXMuZnVuYyxcbiAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgaGVhZGVyOiBQcm9wVHlwZXMubm9kZSxcbiAgZm9vdGVyOiBQcm9wVHlwZXMubm9kZSxcbn07XG5cblxuLyoqXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb29rdXBJbnB1dCBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzZWxlY3RlZDogcHJvcHMuZGVmYXVsdFNlbGVjdGVkLFxuICAgICAgb3BlbmVkOiBwcm9wcy5kZWZhdWx0T3BlbmVkLFxuICAgICAgc2VhcmNoVGV4dDogcHJvcHMuZGVmYXVsdFNlYXJjaFRleHQsXG4gICAgICBmb2N1c0ZpcnN0Q2FuZGlkYXRlOiBmYWxzZSxcbiAgICB9O1xuICB9XG5cbiAgb25TZWFyY2hUZXh0Q2hhbmdlKHNlYXJjaFRleHQpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VhcmNoVGV4dCB9KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNlYXJjaFRleHRDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZWFyY2hUZXh0Q2hhbmdlKHNlYXJjaFRleHQpO1xuICAgIH1cbiAgfVxuXG4gIG9uTG9va3VwUmVxdWVzdChzZWFyY2hUZXh0KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW5lZDogdHJ1ZSB9KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vbkxvb2t1cFJlcXVlc3QpIHtcbiAgICAgIHRoaXMucHJvcHMub25Mb29rdXBSZXF1ZXN0KHNlYXJjaFRleHQpO1xuICAgIH1cbiAgfVxuXG4gIG9uTG9va3VwQ2FuY2VsKCkge1xuICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuZWQ6IGZhbHNlIH0pO1xuICAgIGlmICh0aGlzLnByb3BzLm9uTG9va3VwQ2FuY2VsKSB7XG4gICAgICB0aGlzLnByb3BzLm9uTG9va3VwQ2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgb25SZXNldFNlbGVjdGlvbigpIHtcbiAgICB0aGlzLnNldFN0YXRlKHsgc2VsZWN0ZWQ6IG51bGwgfSk7XG4gICAgaWYgKHRoaXMucHJvcHMub25TZWxlY3QpIHtcbiAgICAgIHRoaXMucHJvcHMub25TZWxlY3QobnVsbCk7XG4gICAgfVxuICAgIHRoaXMub25TZWFyY2hUZXh0Q2hhbmdlKCcnKTtcbiAgICB0aGlzLm9uTG9va3VwUmVxdWVzdCgnJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBzZWFyY2hFbGVtID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcy5yZWZzLnNlYXJjaCk7XG4gICAgICBjb25zdCBpbnB1dEVsZW0gPSBzZWFyY2hFbGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICBpbnB1dEVsZW0uZm9jdXMoKTtcbiAgICB9LCAxMCk7XG4gIH1cblxuICBvbkxvb2t1cEl0ZW1TZWxlY3Qoc2VsZWN0ZWQpIHtcbiAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBzZWxlY3RlZCwgb3BlbmVkOiBmYWxzZSB9KTtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uU2VsZWN0KSB7XG4gICAgICAgIHRoaXMucHJvcHMub25TZWxlY3Qoc2VsZWN0ZWQpO1xuICAgICAgfVxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbkVsZW0gPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzLnJlZnMuc2VsZWN0aW9uKTtcbiAgICAgICAgY29uc3QgcGlsbEVsZW0gPSBzZWxlY3Rpb25FbGVtLnF1ZXJ5U2VsZWN0b3IoJ2EnKTtcbiAgICAgICAgaWYgKHBpbGxFbGVtKSB7IHBpbGxFbGVtLmZvY3VzKCk7IH1cbiAgICAgIH0sIDEwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IG9wZW5lZDogZmFsc2UgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3Qgc2VhcmNoRWxlbSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMucmVmcy5zZWFyY2gpO1xuICAgICAgICBjb25zdCBpbnB1dEVsZW0gPSBzZWFyY2hFbGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICAgIGlucHV0RWxlbS5mb2N1cygpO1xuICAgICAgfSwgMTApO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNvbXBsZXRlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29tcGxldGUoKTtcbiAgICB9XG4gIH1cblxuICBvbkZvY3VzRmlyc3RDYW5kaWRhdGUoKSB7XG4gICAgY29uc3QgeyBvcGVuZWQgPSB0aGlzLnN0YXRlLm9wZW5lZCB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoIW9wZW5lZCkge1xuICAgICAgdGhpcy5vbkxvb2t1cFJlcXVlc3QodGhpcy5zdGF0ZS5zZWFyY2hUZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGZvY3VzRmlyc3RDYW5kaWRhdGU6IHRydWUgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGZvY3VzRmlyc3RDYW5kaWRhdGU6IGZhbHNlIH0pO1xuICAgICAgfSwgMTApO1xuICAgIH1cbiAgfVxuXG4gIG9uQmx1cigpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWRJbkNvbXBvbmVudCgpKSB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBvcGVuZWQ6IGZhbHNlIH0pO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5vbkJsdXIpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uQmx1cigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ29tcGxldGUpIHtcbiAgICAgICAgICB0aGlzLnByb3BzLm9uQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIDEwKTtcbiAgfVxuXG4gIGlzRm9jdXNlZEluQ29tcG9uZW50KCkge1xuICAgIGNvbnN0IHJvb3RFbCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICAgIGxldCB0YXJnZXRFbCA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgd2hpbGUgKHRhcmdldEVsICYmIHRhcmdldEVsICE9PSByb290RWwpIHtcbiAgICAgIHRhcmdldEVsID0gdGFyZ2V0RWwucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgcmV0dXJuICEhdGFyZ2V0RWw7XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgdG90YWxDb2xzLCBjb2xzLCBsYWJlbCxcbiAgICAgIHNlbGVjdGVkID0gdGhpcy5zdGF0ZS5zZWxlY3RlZCwgZGVmYXVsdFNlbGVjdGVkLFxuICAgICAgb3BlbmVkID0gdGhpcy5zdGF0ZS5vcGVuZWQsIGRlZmF1bHRPcGVuZWQsXG4gICAgICBzZWFyY2hUZXh0ID0gdGhpcy5zdGF0ZS5zZWFyY2hUZXh0LCBkZWZhdWx0U2VhcmNoVGV4dCxcbiAgICAgIGxvb2t1cEZpbHRlcixcbiAgICAgIGxpc3RIZWFkZXIsXG4gICAgICBsaXN0Rm9vdGVyLFxuICAgICAgZGF0YSwgLi4ucHJvcHMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgZHJvcGRvd24gPSAoXG4gICAgICA8TG9va3VwQ2FuZGlkYXRlTGlzdCB7IC4uLnByb3BzIH1cbiAgICAgICAgcmVmPSdjYW5kaWRhdGVMaXN0J1xuICAgICAgICBkYXRhPXsgZGF0YSB9XG4gICAgICAgIGZvY3VzPXsgdGhpcy5zdGF0ZS5mb2N1c0ZpcnN0Q2FuZGlkYXRlIH1cbiAgICAgICAgaGlkZGVuPXsgIW9wZW5lZCB9XG4gICAgICAgIGZpbHRlcj17IGxvb2t1cEZpbHRlciA/IChlbnRyeSkgPT4gbG9va3VwRmlsdGVyKGVudHJ5LCBzZWFyY2hUZXh0KSA6IHVuZGVmaW5lZCB9XG4gICAgICAgIGhlYWRlcj17IGxpc3RIZWFkZXIgfVxuICAgICAgICBmb290ZXI9eyBsaXN0Rm9vdGVyIH1cbiAgICAgICAgb25TZWxlY3Q9eyB0aGlzLm9uTG9va3VwSXRlbVNlbGVjdC5iaW5kKHRoaXMpIH1cbiAgICAgICAgb25CbHVyPXsgdGhpcy5vbkJsdXIuYmluZCh0aGlzKSB9XG4gICAgICAvPlxuICAgICk7XG4gICAgY29uc3QgZm9ybUVsZW1Qcm9wcyA9IHsgaWQ6IHByb3BzLmlkLCB0b3RhbENvbHMsIGNvbHMsIGxhYmVsLCBkcm9wZG93biB9O1xuICAgIHJldHVybiAoXG4gICAgICA8Rm9ybUVsZW1lbnQgeyAuLi5mb3JtRWxlbVByb3BzIH0+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPExvb2t1cFNlbGVjdGlvbiB7IC4uLnByb3BzIH1cbiAgICAgICAgICAgIHJlZj0nc2VsZWN0aW9uJ1xuICAgICAgICAgICAgc2VsZWN0ZWQ9eyBzZWxlY3RlZCB9XG4gICAgICAgICAgICBoaWRkZW49eyAhc2VsZWN0ZWQgfVxuICAgICAgICAgICAgb25SZXNldFNlbGVjdGlvbj17IHRoaXMub25SZXNldFNlbGVjdGlvbi5iaW5kKHRoaXMpIH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxMb29rdXBTZWFyY2ggeyAuLi5wcm9wcyB9XG4gICAgICAgICAgICByZWY9J3NlYXJjaCdcbiAgICAgICAgICAgIGhpZGRlbj17ICEhc2VsZWN0ZWQgfVxuICAgICAgICAgICAgc2VhcmNoVGV4dD17IHNlYXJjaFRleHQgfVxuICAgICAgICAgICAgb25DaGFuZ2U9eyB0aGlzLm9uU2VhcmNoVGV4dENoYW5nZS5iaW5kKHRoaXMpIH1cbiAgICAgICAgICAgIG9uU3VibWl0PXsgKCkgPT4gdGhpcy5vbkxvb2t1cFJlcXVlc3Qoc2VhcmNoVGV4dCkgfVxuICAgICAgICAgICAgb25QcmVzc0Rvd249eyB0aGlzLm9uRm9jdXNGaXJzdENhbmRpZGF0ZS5iaW5kKHRoaXMpIH1cbiAgICAgICAgICAgIG9uQ29tcGxldGU9eyB0aGlzLm9uTG9va3VwQ2FuY2VsLmJpbmQodGhpcykgfVxuICAgICAgICAgICAgb25CbHVyPXsgdGhpcy5vbkJsdXIuYmluZCh0aGlzKSB9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0Zvcm1FbGVtZW50PlxuICAgICk7XG4gIH1cbn1cblxuXG5Mb29rdXBJbnB1dC5wcm9wVHlwZXMgPSB7XG4gIGNsYXNzTmFtZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBkZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHNlbGVjdGVkOiBMb29rdXBFbnRyeVR5cGUsXG4gIGRlZmF1bHRTZWxlY3RlZDogTG9va3VwRW50cnlUeXBlLFxuICBvcGVuZWQ6IFByb3BUeXBlcy5ib29sLFxuICBkZWZhdWx0T3BlbmVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgc2VhcmNoVGV4dDogUHJvcFR5cGVzLnN0cmluZyxcbiAgZGVmYXVsdFNlYXJjaFRleHQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gIGRhdGE6IFByb3BUeXBlcy5hcnJheU9mKExvb2t1cEVudHJ5VHlwZSksXG4gIGxvb2t1cEZpbHRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gIGxpc3RIZWFkZXI6IFByb3BUeXBlcy5ub2RlLFxuICBsaXN0Rm9vdGVyOiBQcm9wVHlwZXMubm9kZSxcbiAgb25CbHVyOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25TZWFyY2hUZXh0Q2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Mb29rdXBSZXF1ZXN0OiBQcm9wVHlwZXMuZnVuYyxcbiAgb25Mb29rdXBDYW5jZWw6IFByb3BUeXBlcy5mdW5jLFxuICBvblNlbGVjdDogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uQ29tcGxldGU6IFByb3BUeXBlcy5mdW5jLFxuICB0b3RhbENvbHM6IFByb3BUeXBlcy5udW1iZXIsXG4gIGNvbHM6IFByb3BUeXBlcy5udW1iZXIsXG59O1xuXG5Mb29rdXBJbnB1dC5pc0Zvcm1FbGVtZW50ID0gdHJ1ZTtcbiJdfQ==